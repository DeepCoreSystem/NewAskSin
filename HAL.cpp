/*
*  AskSin driver implementation
*  2013-08-03 <trilu@gmx.de> Creative Commons - http://creativecommons.org/licenses/by-nc-sa/3.0/de/
* - -----------------------------------------------------------------------------------------------------------------------
* - AskSin hardware abstraction layer  ------------------------------------------------------------------------------------
* - -----------------------------------------------------------------------------------------------------------------------
*/


#include "00_debug-flag.h"
#include "HAL.h"



/*************************************************************************************************************************/
/*************************************************************************************************************************/
/* - arduino compatible functions -------------------------------------------------------------------------------------- */
/*************************************************************************************************************************/
/*************************************************************************************************************************/

//- randum number functions -----------------------------------------------------------------------------------------------
void get_random(uint8_t *buf) {
	/* not random, but most likely, as real random takes 200 byte more */

	uint32_t time = get_millis();															// get current time 
	memcpy(buf, (uint8_t*)&time, 4);														// copy the time into the array
	memcpy(buf + 2, (uint8_t*)&time, 4);
	for (uint8_t i = 0; i < 6; i++) {														// do some xors and byte shift
		if (i) buf[i] ^= buf[i - 1];
		else buf[0] ^= 0x35;
		if (buf[i] & 1) buf[i] = (buf[i] >> 1) ^ 0xA0;
		else buf[i] = (buf[i] >> 1);
	}
}
//- -----------------------------------------------------------------------------------------------------------------------





